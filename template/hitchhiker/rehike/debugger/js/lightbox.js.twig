/**
 * @fileoverview Provides basic lightbox behaviours for Rebug.
 * 
 * @author Taniko Yamamoto <kirasicecreamm@gmail.com>
 * @author The Rehike Maintainers
 */

rebug.lightbox = {};

/**
 * Stores a reference to the lightbox container element.
 * 
 * @type {rehike.Lightbox}
 */
rebug.lightbox._instance = null;

/**
 * Opens the Rebug lightbox.
 */
rebug.lightbox.open = function()
{
    rebug.lightbox._instance.open();

    // Alert any potential listeners to the new state.
    rehike.pubsub.publish("rebug-lightbox-opened");
};

/**
 * Closes the Rebug lightbox.
 */
rebug.lightbox.close = function()
{
    rebug.lightbox._instance.close();

    // Alert any potential listeners to the new state.
    rehike.pubsub.publish("rebug-lightbox-closed");
};

/**
 * Runs upon Rebug initialisation.
 * 
 * @private
 */
rebug.lightbox._init = function()
{
    rebug.lightbox._instance = new rehike.Lightbox(
        document.getElementById("rebug-lightbox-container") || null
    );
};

rehike.pubsub.subscribe("rebug-init-finish", rebug.lightbox._init);